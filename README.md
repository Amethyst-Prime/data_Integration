# 数据集成可视化部分

## 前端部分

### 1. 环境

考虑到只需要进行简单的图像展示，并且没有动态交互，故前端采用简单的html+js完成，并使用Echarts组件对数据进行可视化。

要运行前端项目需要输入以下指令下载echarts包

```
npm install echarts --save
```

![image-20220430222833439](asset\image-20220430222833439.png)****

在html文件的head中引入echarts

### 2. 可视化方案

Echarts可以绘制包括但不限于：折线图、柱状图、饼图、散点图、日历坐标系、数据集等常用图像，考虑到作业二的数据可视化需要表现数据与时间的关系，且后端数据库发送来的数据为以用户区分的包含时间和消费信息的JSON数据，我们选取折线图、柱状图、日历坐标系等来进行数据展示。



#### 2.1 柱状图

<img src="asset\image-20220428235518424.png" alt="image-20220428235518424" style="zoom:67%;" />

数据以用户为单位区分，所以图表展示出的数据集是某用户在该段时间内的消费行为。其中柱状图用以展示横轴为日期的数据，而纵轴为该用户在该日的消费金额。在数据量较少时，其可视化为常规柱状图。当数据量很大时，横轴会缩放为时间段是不是具体某一天的时间点，并展示所有数据。在生成的柱状图下方会有所有数据的数据总览，通过在图表上滚动鼠标滚轮或者在总览条上拖拽显示区间可以查看时间划分更为详细的局部的数据。

<img src="asset\image-20220430223007230.png" alt="image-20220430223007230" style="zoom:67%;" />

代码如上。

使用数据集方式将数据放在dataset中的source里，并设置dataZoom实现数据时间尺度上的缩放

<img src="asset\image-20220430223118183.png" alt="image-20220430223118183" style="zoom:67%;" />

将每天的数据逐个压入数据集中，并进行排序以确保数据的展示是按照时间顺序（echarts中的柱状图默认是按照数据集中的数据顺序生成）

![image-20220430212536909](asset\image-20220430212536909.png)

![image-20220430201342950](asset\image-20220430201342950.png)

实际效果图如上

#### 2.2 散点图



<img src="asset\image-20220430223457242.png" alt="image-20220430223457242" style="zoom: 80%;" />

散点图便于展示在一周的尺度内某用户的交易金额情况。通过横坐标为周的散点图可以直观的看出，该用户在每周几会进行交易、周几进行的交易金额较大等等

<img src="asset\image-20220430224503249.png" alt="image-20220430224503249" style="zoom:67%;" />

数据集的格式与柱状图类似

<img src="asset\image-20220430224522224.png" alt="image-20220430224522224" style="zoom:67%;" />

这里需要额外做的是将日期转换为星期中的某一天，利用getDay方法实现。

<img src="asset\image-20220430224627869.png" alt="image-20220430224627869" style="zoom:80%;" />

实际效果图如上。



#### 2.3 日历热力图

![image-20220428235929624](asset\image-20220428235929624.png)

日历热力图能非常直观的展示一年中每天该用户是否进行交易以及交易金额的大小。类似于github中的活跃度

<img src="asset\image-20220430225319759.png" alt="image-20220430225319759" style="zoom:80%;" />

这里设置热力图显示的数据范围（图示中是2000），以及时间范围（图示中是2021-01-01到2022-4-30）

<img src="asset\image-20220430225432265.png" alt="image-20220430225432265" style="zoom:80%;" />

数据的处理与柱状图类似

![image-20220430225453514](asset\image-20220430225453514.png)

生成的效果图如上